<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Partner Brief — One Pager</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    html, body { background:#0b0f14; color:#e6edf3; }
    .card { background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03)); border:1px solid rgba(255,255,255,0.08); }
    .chip { background:rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.12); }
    .grid-auto { display:grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 14px; }
    .shadow-soft { box-shadow: 0 10px 30px rgba(0,0,0,0.25); }
    .container { max-width:1100px; }
    .kpi { font-variant-numeric: tabular-nums; }
    .table-wrap { overflow:auto; }
    /* Print tweaks */
    @media print { .no-print { display:none !important; } body { background:#fff; color:#000; } .card { background:#fff; border-color:#ddd; } }
  </style>
</head>
<body>
  <div class="container mx-auto p-5 md:p-8">
    <!-- Header -->
    <header class="mb-6 flex flex-col md:flex-row md:items-end md:justify-between gap-4">
      <div>
        <h1 class="text-3xl md:text-4xl font-semibold tracking-tight">Partner Brief</h1>
        <p class="opacity-80 mt-1">Snapshot for upcoming partnering meeting — built as a single-page site.</p>
      </div>
      <div class="flex gap-2 no-print">
        <button id="downloadCsvBtn" class="px-3 py-2 rounded-xl chip">Download CSV</button>
        <button onclick="window.print()" class="px-3 py-2 rounded-xl chip">Print</button>
      </div>
    </header>

    <!-- Quick Filters / Tags -->
    <div class="flex flex-wrap gap-2 mb-6 no-print">
      <span class="px-3 py-1 rounded-full text-sm chip">FY2024 vs FY2025</span>
      <span class="px-3 py-1 rounded-full text-sm chip">Expenses & Profit</span>
      <span class="px-3 py-1 rounded-full text-sm chip">Monthly View</span>
    </div>

    <!-- KPIs -->
    <section class="grid-auto mb-6">
      <div class="card rounded-2xl p-4 shadow-soft">
        <p class="text-sm opacity-70">Total 2025 Sales</p>
        <p id="kpiSales2025" class="kpi text-2xl font-semibold">—</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <p class="text-sm opacity-70">Total 2024 Sales</p>
        <p id="kpiSales2024" class="kpi text-2xl font-semibold">—</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <p class="text-sm opacity-70">YoY Sales Growth</p>
        <p id="kpiYoY" class="kpi text-2xl font-semibold">—</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <p class="text-sm opacity-70">Total Expenses</p>
        <p id="kpiExpenses" class="kpi text-2xl font-semibold">—</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <p class="text-sm opacity-70">Total Profit (Current)</p>
        <p id="kpiProfitCurrent" class="kpi text-2xl font-semibold">—</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <p class="text-sm opacity-70">Total Profit (Projected)</p>
        <p id="kpiProfitProj" class="kpi text-2xl font-semibold">—</p>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <p class="text-sm opacity-70">Avg Monthly 2025 Sales</p>
        <p id="kpiAvg2025" class="kpi text-2xl font-semibold">—</p>
      </div>
    </section>

    <!-- Charts -->
    <section class="grid md:grid-cols-2 gap-4 mb-6">
      <div class="card rounded-2xl p-4 shadow-soft">
        <h3 class="font-medium mb-2">Sales — 2024 vs 2025</h3>
        <canvas id="salesChart" height="200"></canvas>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <h3 class="font-medium mb-2">Expenses & Profit</h3>
        <canvas id="profitChart" height="200"></canvas>
      </div>
    </section>

    <!-- Data Table -->
    <section class="card rounded-2xl p-4 shadow-soft mb-6">
      <div class="flex items-center justify-between mb-3">
        <h3 class="font-medium">Monthly Detail</h3>
        <div class="no-print flex items-center gap-2">
          <label class="text-sm opacity-80" for="search">Search</label>
          <input id="search" type="text" placeholder="Type to filter…" class="px-3 py-1 rounded-lg bg-transparent outline-none border border-white/20" />
        </div>
      </div>
      <div class="table-wrap">
        <table class="w-full text-sm">
          <thead class="opacity-80">
            <tr>
              <th class="text-left p-2">Month</th>
              <th class="text-right p-2">Sales 2024</th>
              <th class="text-right p-2">Sales 2025</th>
              <th class="text-right p-2">Expenses</th>
              <th class="text-right p-2">Profit (Current)</th>
              <th class="text-right p-2">Profit (Projected)</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </section>

    <!-- Notes -->
    <section class="grid md:grid-cols-3 gap-4">
      <div class="card rounded-2xl p-4 shadow-soft md:col-span-2">
        <h3 class="font-medium mb-2">Talking Points</h3>
        <ul class="list-disc list-inside space-y-2 opacity-90">
          <li>Context on YoY movement and the drivers by month.</li>
          <li>Expense absorption and path to target margin.</li>
          <li>Scenario delta: current vs projected.</li>
        </ul>
      </div>
      <div class="card rounded-2xl p-4 shadow-soft">
        <h3 class="font-medium mb-2">Owner Notes</h3>
        <textarea id="notes" class="w-full h-32 bg-transparent border border-white/20 rounded-xl p-3" placeholder="Type your notes for the meeting…"></textarea>
      </div>
    </section>
  </div>

  <script>
    // Embedded dataset generated from your CSV
    const DATA = {"columns":["Month","Sales2024","Sales2025","Expenses","ProfitCurrentPct","ProfitProjectedSE"],"rows":[
      ["January",168076.2,144619.72,144983.19,-363.47,-363.47],
      ["February",177540.0,149778.6,148265.09,1513.51,1513.51],
      ["March",189646.6,172845.74,156638.86,16206.88,16206.88],
      ["April",175948.7,159293.52,163805.33,-4511.81,-4511.81],
      ["May",181556.1,174489.45,169739.06,4750.39,4750.39],
      ["June",172960.0,166570.4,171002.24,-4431.84,-4431.84],
      ["July",169744.3,157909.2,156799.27,1109.93,1109.93],
      ["August",172333.6,151816.85,156170.19,-4353.34,-4353.34],
      ["September",168292.0,154964.64,154492.6,472.04,472.04],
      ["October",173667.6,151709.5,152994.77,-1285.27,-1285.27],
      ["November",177905.8,154291.03,156567.08,-2276.05,-2276.05],
      ["December",193961.2,173076.15,168050.34,15025.81,15025.81]
    ]};

    const METRICS = {"Total_2025_Sales":1825365.30,"Total_2024_Sales":2081632.10,"YoY_Sales_Growth_Pct":-12.31,"Total_Expenses":1880507.98,"Total_Profit_Current":48100.91,"Total_Profit_Projected":-55142.67,"Avg_Monthly_2025_Sales":152113.78};

    const currency = (n)=> new Intl.NumberFormat(undefined,{style:'currency',currency:'USD',maximumFractionDigits:0}).format(n||0);
    const num = (n)=> new Intl.NumberFormat(undefined,{maximumFractionDigits:2}).format(n||0);

    function paintKPIs(){
      document.getElementById('kpiSales2025').textContent = currency(METRICS.Total_2025_Sales);
      document.getElementById('kpiSales2024').textContent = currency(METRICS.Total_2024_Sales);
      const yoy = METRICS.YoY_Sales_Growth_Pct;
      const el = document.getElementById('kpiYoY');
      el.textContent = (yoy>0? '+':'') + yoy.toFixed(2) + '%';
      el.classList.toggle('text-emerald-400', yoy>0);
      el.classList.toggle('text-rose-400', yoy<0);
      document.getElementById('kpiExpenses').textContent = currency(METRICS.Total_Expenses);
      document.getElementById('kpiProfitCurrent').textContent = currency(METRICS.Total_Profit_Current);
      const pc = document.getElementById('kpiProfitProj');
      pc.textContent = currency(METRICS.Total_Profit_Projected);
      pc.classList.toggle('text-rose-400', METRICS.Total_Profit_Projected<0);
      document.getElementById('kpiAvg2025').textContent = currency(METRICS.Avg_Monthly_2025_Sales);
    }

    function buildTable(filter=''){
      const body = document.getElementById('tableBody');
      body.innerHTML = '';
      const rows = DATA.rows.filter(r=> r[0].toLowerCase().includes(filter.toLowerCase()));
      for(const r of rows){
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td class="p-2">${r[0]}</td>
          <td class="p-2 text-right">${currency(r[1])}</td>
          <td class="p-2 text-right">${currency(r[2])}</td>
          <td class="p-2 text-right">${currency(r[3])}</td>
          <td class="p-2 text-right ${r[4]<0?'text-rose-400':''}">${currency(r[4])}</td>
          <td class="p-2 text-right ${r[5]<0?'text-rose-400':''}">${currency(r[5])}</td>`;
        body.appendChild(tr);
      }
    }

    function buildCharts(){
      const labels = DATA.rows.map(r=> r[0]);
      const s2024 = DATA.rows.map(r=> r[1]);
      const s2025 = DATA.rows.map(r=> r[2]);
      const expenses = DATA.rows.map(r=> r[3]);
      const profitCurr = DATA.rows.map(r=> r[4]);
      const profitProj = DATA.rows.map(r=> r[5]);

      // Sales comparative
      const ctx1 = document.getElementById('salesChart');
      new Chart(ctx1, {
        type:'line',
        data:{ labels, datasets:[
          { label:'Sales 2024', data:s2024, tension:.35 },
          { label:'Sales 2025', data:s2025, tension:.35 }
        ]},
        options:{ responsive:true, maintainAspectRatio:false, plugins:{ legend:{labels:{color:'#e6edf3'}} }, scales:{ x:{ ticks:{ color:'#e6edf3' } }, y:{ ticks:{ color:'#e6edf3' } } } }
      });

      // Expenses & Profit
      const ctx2 = document.getElementById('profitChart');
      new Chart(ctx2, {
        type:'bar',
        data:{ labels, datasets:[
          { label:'Expenses', data:expenses },
          { label:'Profit (Current)', data:profitCurr },
          { label:'Profit (Projected)', data:profitProj }
        ]},
        options:{ responsive:true, maintainAspectRatio:false, plugins:{ legend:{labels:{color:'#e6edf3'}} }, scales:{ x:{ ticks:{ color:'#e6edf3' } }, y:{ ticks:{ color:'#e6edf3' } } } }
      });
    }

    // CSV download of the embedded data
    document.getElementById('downloadCsvBtn').addEventListener('click',()=>{
      const head = DATA.columns.join(',');
      const rows = DATA.rows.map(r=> r.join(','));
      const csv = [head, ...rows].join('\n');
      const blob = new Blob([csv], {type:'text/csv'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'partner-brief-data.csv';
      document.body.appendChild(a); a.click(); a.remove();
      URL.revokeObjectURL(url);
    });

    // Search filter
    document.getElementById('search').addEventListener('input', (e)=> buildTable(e.target.value));

    // Init
    paintKPIs();
    buildTable('');
    buildCharts();
  </script>
</body>
</html>
